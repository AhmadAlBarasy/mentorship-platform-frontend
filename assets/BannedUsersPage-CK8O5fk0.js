import{c as N,r as k,ad as w,ae as v,j as e,D as h,W as U,l as c,L as x,U as B,E as m,C,S as L,Q as g,X as M}from"./index-CJ5LgcXB.js";/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],o=N("user-x",S),z=({isOpen:d,onClose:t,onConfirm:l,user:s,isUnbanning:r})=>d?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Lift Ban"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:r,children:e.jsx(M,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsx("div",{className:"ml-4",children:e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Are you sure you want to lift the ban for this user?"})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["User: ",s==null?void 0:s.name]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",s==null?void 0:s.id]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This will restore the user's access to the platform and all its features."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:t,disabled:r,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:l,disabled:r,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center",children:r?e.jsxs(e.Fragment,{children:[e.jsx(h,{size:"sm",className:"mr-2"}),"Lifting Ban..."]}):"Lift Ban"})]})]})})}):null;function O(){const[d,t]=k.useState({isOpen:!1,user:null}),{data:l,isLoading:s,error:r,refetch:y}=w(),i=v(),b=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=async a=>{try{await i.mutateAsync(a),t({isOpen:!1,user:null}),g.success("Ban lifted successfully")}catch(f){console.error("Error unbanning user:",f),g.error("Failed to ban user")}},j=a=>{t({isOpen:!0,user:a})},u=()=>{i.isPending||t({isOpen:!1,user:null})};if(s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(h,{size:"lg"})});if(r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(U,{message:"Failed to load banned users",onRetry:y})});const n=(l==null?void 0:l.bannedUsers)||[];return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:e.jsx(o,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Banned Users Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage users who have been banned from accessing the platform"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 mt-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:e.jsx(o,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.length}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Banned Users"})]})]})})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:n.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(c,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Banned Users"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Great! There are no banned users at the moment."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ban Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Banned At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Banned By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(x,{to:`/profile/${a.id}`,className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 mb-1",children:[e.jsx(B,{className:"w-4 h-4"}),a.name,e.jsx(m,{className:"w-3 h-3"})]}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",a.id]})]})}),e.jsx("td",{className:"px-6 py-4 max-w-xs",children:e.jsx("p",{className:"text-sm text-gray-900 dark:text-white break-words whitespace-normal",children:a.banReason})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(C,{className:"w-4 h-4"}),b(a.bannedAt)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs(x,{to:`/profile/${a.bannedBy}`,className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:[e.jsx(L,{className:"w-4 h-4"}),a.bannedBy,e.jsx(m,{className:"w-3 h-3"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("button",{onClick:()=>j(a),className:"inline-flex items-center gap-2 px-3 py-1 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors text-sm font-medium",children:[e.jsx(c,{className:"w-4 h-4"}),"Lift Ban"]})})]},a.id))})]})})}),n.length>0&&e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",n.length," banned user",n.length!==1?"s":""]})}),e.jsx(z,{isOpen:d.isOpen,onClose:u,onConfirm:()=>{var a;return p((a=d.user)==null?void 0:a.id)},user:d.user,isUnbanning:i.isPending})]})}export{O as default};
