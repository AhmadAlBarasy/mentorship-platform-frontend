import{H as V,I as A,J as q,j as e,X as u,U as M,E as T,C as p,_ as f,ac as N,f as U,s as I,K as L,r as g,D as z,W as J,Q as h,L as K,B as Y}from"./index-CEfpmG_s.js";import{S as P}from"./square-pen-BJfCIEax.js";const j="https://mentorship-platform-api-production.up.railway.app:3000/api/v1",w={getMenteeSessionRequests:async()=>{const s=await fetch(`${j}/users/me/session-requests`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!s.ok)throw new Error(`Failed to fetch services: ${s.status} ${s.statusText}`);return await s.json()},withdrawSessionRequest:async s=>{const a=await fetch(`${j}/users/me/session-requests/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`Failed to withdraw session request: ${a.status} ${a.statusText}`);return{success:!0,message:`Session request by ${s} was deleted`}},updateSessionRequestAgenda:async({requestId:s,agenda:a})=>{const t=await fetch(`${j}/users/me/session-requests/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({agenda:a})});if(!t.ok)throw new Error(`Failed to update session agenda: ${t.status} ${t.statusText}`);return await t.json()}},B=()=>V({queryKey:["menteeSessionRequests"],queryFn:w.getMenteeSessionRequests,staleTime:2*60*1e3,refetchInterval:5*60*1e3}),H=()=>{const s=A();return q({mutationFn:w.withdrawSessionRequest,onMutate:async a=>{await s.cancelQueries({queryKey:["menteeSessionRequests"]});const t=s.getQueryData(["menteeSessionRequests"]);return s.setQueryData(["menteeSessionRequests"],r=>{if(!(r!=null&&r.sessionRequests))return r;const n={...r.sessionRequests};return Object.keys(n).forEach(d=>{n[d]=n[d].filter(i=>i.id!==a)}),{...r,sessionRequests:n}}),{previousData:t}},onError:(a,t,r)=>{r!=null&&r.previousData&&s.setQueryData(["menteeSessionRequests"],r.previousData),console.error("Failed to withdraw session request:",a)},onSettled:()=>{}})},X=()=>{const s=A();return q({mutationFn:w.updateSessionRequestAgenda,onMutate:async({requestId:a,agenda:t})=>{await s.cancelQueries({queryKey:["menteeSessionRequests"]});const r=s.getQueryData(["menteeSessionRequests"]);return s.setQueryData(["menteeSessionRequests"],n=>{if(!(n!=null&&n.sessionRequests))return n;const d={...n.sessionRequests};return Object.keys(d).forEach(i=>{d[i]=d[i].map(o=>o.id===a?{...o,agenda:t}:o)}),{...n,sessionRequests:d}}),{previousData:r}},onError:(a,t,r)=>{r!=null&&r.previousData&&s.setQueryData(["menteeSessionRequests"],r.previousData),console.error("Failed to update session agenda:",a)},onSettled:()=>{}})},Z=(s,a)=>{const t=new Date(`${s}T${a}`);return{date:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),time:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}},ee=s=>{if(s<60)return`${s} minutes`;const a=Math.floor(s/60),t=s%60;return t===0?`${a} hour${a>1?"s":""}`:`${a} hour${a>1?"s":""} and ${t} minutes`},se=s=>s.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase());function ae({request:s,onClose:a,onWithdraw:t,onUpdateAgenda:r,isLoading:n}){const{date:d,time:i}=Z(s.date,s.startTime);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Session Request Details"}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(u,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Service Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Service Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:se(s.serviceType)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.mentorName}),e.jsxs("span",{className:"text-sm text-gray-500",children:["@",s.mentorId.slice(-8)]})]}),e.jsxs("a",{href:`/profile/${s.mentorId}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-blue-600 dark:text-blue-400 hover:underline text-sm",children:[e.jsx("span",{children:"View Mentor Profile"}),e.jsx(T,{className:"w-3 h-3"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Session Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(p,{className:"w-4 h-4 text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Date & Time"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:d}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:i})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(f,{className:"w-4 h-4 text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Duration"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ee(s.duration)})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Session Agenda"}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(N,{className:"w-4 h-4 text-gray-500 mt-0.5"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.agenda})]})]}),s.communityId&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Community"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:"Requested through community"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["@",s.communityId.slice(-8)]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Request Information"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Requested on"," ",new Date(s.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),s.rejectionReason&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-red-900 dark:text-red-100 mb-2",children:"Rejection Reason"}),e.jsx("p",{className:"text-red-800 dark:text-red-200",children:s.rejectionReason})]}),s.cancellationReason&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Cancellation Reason"}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:s.cancellationReason})]}),s.calendarEventId&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Calendar Event"}),e.jsxs("a",{href:`https://calendar.google.com/calendar/event?eid=${s.calendarEventId}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-blue-600 dark:text-blue-400 hover:underline",children:[e.jsx("span",{children:"View in Google Calendar"}),e.jsx(T,{className:"w-4 h-4"})]})]})]}),(t||r)&&e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[r&&e.jsxs("button",{onClick:()=>{a(),r(s)},disabled:n,className:"inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"Update Agenda"})]}),t&&e.jsxs("button",{onClick:()=>{a(),t(s)},disabled:n,className:"inline-flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:"Withdraw Request"})]})]})]})})}const te=(s,a)=>new Date(`${s}T${a}`).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});function re({request:s,onConfirm:a,onCancel:t,isLoading:r}){return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Withdraw Session Request"}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(u,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(L,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Are you sure you want to withdraw this request?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. You will need to create a new session request if you change your mind."})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Session Details:"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Mentor:"})," ",s.mentorName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date & Time:"})," ",te(s.date,s.startTime)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Agenda:"})," ",s.agenda]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:[e.jsx("button",{onClick:t,disabled:r,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:a,disabled:r,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50",children:r?"Withdrawing...":"Withdraw Request"})]})]})})}const ne=(s,a)=>new Date(`${s}T${a}`).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});function ie({request:s,onConfirm:a,onCancel:t,isLoading:r}){const[n,d]=g.useState(s.agenda),[i,o]=g.useState(""),l=x=>{if(x.preventDefault(),!n.trim()){o("Please provide an agenda for your session");return}if(n.trim().length<10){o("Please provide a more detailed agenda (at least 10 characters)");return}if(n.trim().length>1e3){o("Agenda is too long (maximum 1000 characters)");return}o(""),a(n.trim())};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Update Session Agenda"}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(u,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:l,className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Session Details:"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Mentor:"})," ",s.mentorName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date & Time:"})," ",ne(s.date,s.startTime)]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"agenda",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(N,{className:"w-4 h-4 inline mr-1"}),"Session Agenda"]}),e.jsx("textarea",{id:"agenda",value:n,onChange:x=>{d(x.target.value),i&&o("")},placeholder:"Describe what you'd like to discuss in this session...",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",disabled:r}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[n.length,"/1000 characters"]}),i&&e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:i})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:t,disabled:r,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",onClick:l,disabled:r||!n.trim()||n.trim()===s.agenda,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:r?"Updating...":"Update Agenda"})]})]})})}const v={PENDING:{title:"Pending Requests",color:"orange",bgColor:"bg-orange-50 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800",textColor:"text-orange-700 dark:text-orange-300",icon:f},ACCEPTED:{title:"Accepted Sessions",color:"green",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-700 dark:text-green-300",icon:p},REJECTED:{title:"Rejected Requests",color:"red",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-700 dark:text-red-300",icon:u},CANCELLED:{title:"Canceled Sessions",color:"gray",bgColor:"bg-gray-50 dark:bg-gray-900/20",borderColor:"border-gray-200 dark:border-gray-800",textColor:"text-gray-700 dark:text-gray-300",icon:L}},de=(s,a)=>{const t=new Date(`${s}T${a}`);return{date:t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),time:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}},le=s=>{if(s<60)return`${s}min`;const a=Math.floor(s/60),t=s%60;return t===0?`${a}h`:`${a}h ${t}min`},oe=s=>s.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),ce=({request:s,status:a,onViewDetails:t,onWithdraw:r,onUpdateAgenda:n,isLoading:d})=>{const i=v[a],{date:o,time:l}=de(s.date,s.startTime);return e.jsx("div",{className:`p-4 rounded-lg border ${i.borderColor} ${i.bgColor} hover:shadow-sm transition-shadow`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>t(s),children:[e.jsx("div",{className:"flex items-center space-x-3 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:oe(s.serviceType)}),e.jsx("span",{className:"text-xs text-gray-500",children:"•"}),e.jsx(M,{className:"w-4 h-4 text-gray-500"}),e.jsx(K,{to:`/profile/${s.mentorId}`,className:"font-medium text-blue-600 dark:text-blue-400 hover:underline",onClick:x=>x.stopPropagation(),children:s.mentorName}),e.jsxs("span",{className:"text-xs text-gray-500",children:["@",s.mentorId.slice(-8)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsxs("span",{children:[o," at ",l]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:le(s.duration)})]}),s.communityId&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Via Community"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.agenda})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Requested ",new Date(s.createdAt).toLocaleDateString()]}),a==="REJECTED"&&s.rejectionReason&&e.jsxs("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:["Reason: ",s.rejectionReason]}),a==="CANCELLED"&&s.cancellationReason&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Reason: ",s.cancellationReason]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n(s),disabled:d,className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Update Agenda",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(s),disabled:d,className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Withdraw Request",children:e.jsx(I,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>t(s),className:"p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"View Details",children:e.jsx(Y,{className:"w-4 h-4"})})]})]})})},xe=({requests:s,status:a,onViewDetails:t,onWithdraw:r,onUpdateAgenda:n,isLoading:d})=>{const i=v[a],o=i.icon;return!s||s.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8 text-center",children:[e.jsx("div",{className:`w-12 h-12 mx-auto mb-4 ${i.bgColor} rounded-full flex items-center justify-center`,children:e.jsx(o,{className:`w-6 h-6 ${i.textColor}`})}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:["No ",a.toLowerCase()," requests"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a==="PENDING"&&"You don't have any pending session requests at the moment.",a==="ACCEPTED"&&"You don't have any accepted session requests yet.",a==="REJECTED"&&"You don't have any rejected session requests.",a==="CANCELLED"&&"No sessions have been canceled."]})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:`px-6 py-4 border-b border-gray-200 dark:border-gray-700 ${i.bgColor}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{className:`w-5 h-5 ${i.textColor}`}),e.jsx("h2",{className:`text-lg font-semibold ${i.textColor}`,children:i.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i.bgColor} ${i.textColor}`,children:s.length})]})}),e.jsx("div",{className:"p-6 space-y-4",children:s.map(l=>e.jsx(ce,{request:l,status:a,onViewDetails:t,onWithdraw:r,onUpdateAgenda:n,isLoading:d},l.id))})]})};function he(){var R,D,E,$;const[s,a]=g.useState(null),[t,r]=g.useState(!1),[n,d]=g.useState(!1),[i,o]=g.useState(!1),{data:l,isLoading:x,error:F,refetch:O}=B(),y=H(),b=X();if(x)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(z,{size:"lg"})});if(F)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(J,{message:"Failed to load session requests",onRetry:O})});const W=c=>{a(c),r(!0)},k=c=>{a(c),d(!0)},S=c=>{a(c),o(!0)},Q=async()=>{try{await y.mutateAsync(s.id),d(!1),a(null),h.success("Session request has been withdrawn successfully")}catch(c){console.error("Failed to withdraw request:",c),h.error("Failed to withdraw request: ",c.message)}},G=async c=>{try{await b.mutateAsync({requestId:s.id,agenda:c}),o(!1),a(null),h.success("Session agenda has been updated successfully")}catch(m){console.error("Failed to update agenda:",m),h.error("Failed to updated agenda:",m.message)}},C=y.isPending||b.isPending,_=Object.values((l==null?void 0:l.sessionRequests)||{}).reduce((c,m)=>c+m.length,0);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"My Session Requests"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View and manage all your mentoring session requests"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Requests"})]})]})}),e.jsx("div",{className:"space-y-8",children:Object.entries(v).map(([c])=>{var m;return e.jsx(xe,{requests:((m=l==null?void 0:l.sessionRequests)==null?void 0:m[c])||[],status:c,onViewDetails:W,onWithdraw:k,onUpdateAgenda:S,isLoading:C},c)})}),t&&s&&e.jsx(ae,{request:s,onClose:()=>{r(!1),a(null)},onWithdraw:(D=(R=l==null?void 0:l.sessionRequests)==null?void 0:R.PENDING)!=null&&D.includes(s)?k:null,onUpdateAgenda:($=(E=l==null?void 0:l.sessionRequests)==null?void 0:E.PENDING)!=null&&$.includes(s)?S:null,isLoading:C}),n&&s&&e.jsx(re,{request:s,onConfirm:Q,onCancel:()=>{d(!1),a(null)},isLoading:y.isPending}),i&&s&&e.jsx(ie,{request:s,onConfirm:G,onCancel:()=>{o(!1),a(null)},isLoading:b.isPending})]})})}export{he as default};
