import{c as v,H as E,J as C,r as p,h as R,j as e,X as I,K as T,Q as U,V as A,u as P,D as _,W as O,L as f,Y as L,E as j,m as $,G as F,_ as w,C as D,U as k,S as u,f as z,$ as G,i as q}from"./index-CJ5LgcXB.js";import{T as V}from"./tag-CoTiwJ5n.js";/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],M=v("flag",Y);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],B=v("user-cog",H),N="https://mentorship-platform-api-production.up.railway.app:3000/api/v1",S={getUserProfile:async r=>{const t=await fetch(`${N}/users/${r}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok){if(t.status===404)throw new Error("User not found");if(t.status===403)throw new Error("You don't have permission to view this profile");const a=await t.json();throw new Error(a.message||"Failed to fetch user profile")}return t.json()},reportUser:async({userId:r,body:t})=>{const a=await fetch(`${N}/users/${r}/report`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!a.ok){const s=await a.json();throw new Error(s.message||"Failed to submit report")}return a.json()}},J=r=>E({queryKey:["userProfile",r],queryFn:()=>S.getUserProfile(r),enabled:!!r,staleTime:5*60*1e3,cacheTime:10*60*1e3}),K=()=>C({mutationFn:S.reportUser,onError:r=>{console.error("Report user error:",r)}}),Q=[{value:"harassment",label:"Harassment or Bullying",description:"Threatening, intimidating, or abusive behavior"},{value:"spam",label:"Spam or Unwanted Content",description:"Repetitive, irrelevant, or promotional content"},{value:"inappropriate_content",label:"Inappropriate Content",description:"Content that violates community guidelines"},{value:"fake_profile",label:"Fake Profile or Identity",description:"Impersonation or false information"},{value:"scam",label:"Scam or Fraud",description:"Fraudulent activities or financial scams"},{value:"hate_speech",label:"Hate Speech",description:"Content that promotes hatred or discrimination"},{value:"privacy_violation",label:"Privacy Violation",description:"Sharing personal information without consent"},{value:"other",label:"Other",description:"Other violation not listed above"}];function W({isOpen:r,onClose:t,reportedUser:a}){const[s,l]=p.useState(""),[d,m]=p.useState(!1),{register:x,handleSubmit:g,formState:{errors:i},reset:n}=R(),o=K(),b=async c=>{if(s){m(!0);try{await o.mutateAsync({userId:a.id,body:{violation:s,additionalDetails:c.additionalInfo}}),n(),l(""),t(),U.success("User reported successfully")}catch(y){console.error("Report submission failed:",y)}finally{m(!1)}}},h=()=>{n(),l(""),t()};return r?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75",onClick:h}),e.jsxs("div",{className:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-gray-800 shadow-xl rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-red-100 dark:bg-red-900/20 rounded-full mr-3",children:e.jsx(M,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Report User"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Report @",a==null?void 0:a.id," for community guidelines violation"]})]})]}),e.jsx("button",{onClick:h,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:e.jsx(I,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(T,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"False reports may result in action against your account. Please only report genuine violations of our community guidelines."})]})]})}),e.jsxs("form",{onSubmit:g(b),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-3",children:"What type of violation are you reporting? *"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Q.map(c=>e.jsxs("label",{className:`flex items-start p-3 border rounded-lg cursor-pointer transition-colors ${s===c.value?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("input",{type:"radio",name:"violationType",value:c.value,checked:s===c.value,onChange:y=>l(y.target.value),className:"mt-1 text-red-600 focus:ring-red-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:c.description})]})]},c.value))}),!s&&i.violationType&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"Please select a violation type"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Additional Information"}),e.jsx("textarea",{...x("additionalInfo",{maxLength:{value:1e3,message:"Additional information must not exceed 1000 characters"}}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white resize-none",placeholder:"Please provide any additional details about this violation (optional)..."}),i.additionalInfo&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.additionalInfo.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Optional: Provide context or specific examples of the violation"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!s||d||o.isPending,className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors disabled:cursor-not-allowed",children:d||o.isPending?"Submitting Report...":"Submit Report"})]}),o.isSuccess&&e.jsx("div",{className:"rounded-md bg-green-50 dark:bg-green-900/20 p-4",children:e.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"Report submitted successfully. Our team will review it within 24 hours."})}),o.error&&e.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:e.jsx("div",{className:"text-sm text-red-700 dark:text-red-400",children:o.error.message})})]})]})]})}):null}function ie(){var b,h;const{id:r}=A(),{data:t,isLoading:a}=P(),[s,l]=p.useState(!1),{data:d,isLoading:m,error:x}=J(r),g=((b=t==null?void 0:t.user)==null?void 0:b.id)===r,i=((h=t==null?void 0:t.user)==null?void 0:h.role)==="ADMIN";if(m||a)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(_,{size:"lg"})});if(x)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(O,{title:"Profile Not Found",message:x.message||"The user profile you're looking for doesn't exist or has been removed.",showRetry:!0,onRetry:()=>window.location.reload()})});const n={...d==null?void 0:d.user},o=(n==null?void 0:n.role)==="ADMIN";return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(X,{user:n,isOwnProfile:g,isAdmin:i,isAdminProfile:o,onReport:()=>l(!0)}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Z,{user:n,isOwnProfile:g})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(te,{user:n})})]})]}),s&&e.jsx(W,{isOpen:s,onClose:()=>l(!1),reportedUser:n})]})}function X({user:r,isOwnProfile:t,onReport:a,isAdmin:s,isAdminProfile:l}){const d=i=>i==null?void 0:i.split(" ").map(n=>n[0]).join("").toUpperCase().slice(0,2),m=i=>{switch(i){case"MENTOR":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"MENTEE":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"COMMUNITY_MANAGER":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"ADMIN":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},x=i=>{switch(i){case"COMMUNITY_MANAGER":return"Community Manager";case"MENTOR":return"Mentor";case"MENTEE":return"Mentee";case"ADMIN":return"Admin";default:return i}},g=i=>{switch(i){case"MENTOR":return e.jsx(z,{className:"w-4 h-4"});case"MENTEE":return e.jsx(k,{className:"w-4 h-4"});case"COMMUNITY_MANAGER":return e.jsx(u,{className:"w-4 h-4"});case"ADMIN":return e.jsx(u,{className:"w-4 h-4"});default:return e.jsx(k,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"h-32 bg-gradient-to-r from-blue-500 to-purple-600"}),e.jsx("div",{className:"px-6 pb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:space-x-6",children:[e.jsx("div",{className:"relative -mt-16 mb-4 sm:mb-0",children:e.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white dark:border-gray-800 overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:r!=null&&r.imageUrl?e.jsx("img",{src:(r==null?void 0:r.imageUrl)||"/placeholder.svg?height=128&width=128",alt:r==null?void 0:r.name,className:"w-full h-full object-cover"}):d(r==null?void 0:r.name)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white truncate",children:r==null?void 0:r.name}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["@",r==null?void 0:r.id]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 mt-1",children:r==null?void 0:r.headline}),e.jsx("div",{className:"flex items-center mt-3 space-x-3",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 text-sm font-medium rounded-full ${m(r==null?void 0:r.role)}`,children:[g(r==null?void 0:r.role),e.jsx("span",{className:"ml-1",children:x(r==null?void 0:r.role)})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[t?e.jsxs(f,{to:"/my/settings",className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Edit Profile"]}):!s&&!l&&e.jsxs("button",{onClick:a,className:"inline-flex items-center px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-400 bg-white dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Report User"]}),!t&&s&&e.jsxs(f,{to:`/management/users?id=${r==null?void 0:r.id}`,className:"inline-flex items-center px-4 py-2 border border-blue-300 dark:border-blue-600 rounded-md shadow-sm text-sm font-medium text-blue-700 dark:text-blue-400 bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Manage User"]})]})]})})]})})]})}function Z({user:r,isOwnProfile:t}){var a;return e.jsxs("div",{className:"space-y-6",children:[(r==null?void 0:r.bio)&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"About"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:r.bio})]}),(r==null?void 0:r.role)==="MENTOR"&&((a=r==null?void 0:r.services)==null?void 0:a.length)>0&&e.jsx(ee,{user:r,isOwnProfile:t}),(r==null?void 0:r.skills)&&r.skills.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Skills & Expertise"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.skills.map((s,l)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:s},l))})]}),(r==null?void 0:r.links)&&r.links.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"Links & Social Media"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r.links.map((s,l)=>e.jsxs("a",{href:s.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-gray-300 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors group",children:[e.jsx(j,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0 group-hover:text-blue-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:s.linkName}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:s.linkUrl})]})]},l))})]})]})}function ee({user:r,isOwnProfile:t}){const a=(r==null?void 0:r.services)||[];return!a||a.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),"Services"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map(s=>e.jsx(re,{service:s,userId:r.id,isOwnProfile:t},s.id))})]})}function re({service:r,userId:t,isOwnProfile:a}){const s=()=>{a?window.location.href=`/my/services/${r.id}`:window.location.href=`/users/${t}/services/${r.id}/book`};return e.jsxs("div",{onClick:s,className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:border-gray-300 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer group",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:r.type})}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),r.sessionTime," min"]}),e.jsx("div",{className:"text-right",children:a?"Manage":"Book Now"})]})]})}function te({user:r}){const t=a=>q[a];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:r==null?void 0:r.email})]}),(r==null?void 0:r.country)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t(r.country)})]}),(r==null?void 0:r.timezone)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:r.timezone})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Member Information"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Member since"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:r!=null&&r.dateJoined?new Date(r.dateJoined).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})]})})]})]})}export{ie as default};
