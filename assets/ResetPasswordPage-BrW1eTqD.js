import{n as p,d as f,h as b,u as y,j as s,k as j,L as m,F as c,v as P}from"./index-DjaPym5F.js";import{P as N}from"./PasswordStrengthIndicator-BWriWpoK.js";import{L as v}from"./Logo-D8Wy8gr_.js";function S(){const[x]=p(),o=x.get("token"),w=f(),{register:d,handleSubmit:u,watch:n,formState:{errors:l,isSubmitting:i}}=b(),{resetPassword:e}=y(),r=n("newPassword",""),t=n("confirmPassword",""),h=async a=>{if(a.newPassword===a.confirmPassword)try{await e.mutateAsync({token:o,newPassword:a.newPassword}),w("/login",{state:{message:"Password reset successful. Please log in."}})}catch(g){console.error("Reset password failed:",g)}};return o?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(v,{withLink:!0})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900 dark:text-white",children:"Reset your password"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:"Enter your new password below."})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s.jsxs("form",{className:"space-y-6",onSubmit:u(h),children:[s.jsx(c,{label:"New Password",name:"newPassword",type:"password",placeholder:"Enter your new password",register:d,error:l.newPassword,rules:P.password,showPasswordToggle:!0}),s.jsx(N,{password:r}),s.jsx(c,{label:"Confirm New Password",name:"confirmPassword",type:"password",placeholder:"Confirm your new password",register:d,error:l.confirmPassword,rules:{required:"Please confirm your password",validate:a=>a===r||"Passwords do not match"},showPasswordToggle:!0}),t&&s.jsx("div",{className:"text-sm",children:r===t?s.jsx("span",{className:"text-green-600",children:"✓ Passwords match"}):s.jsx("span",{className:"text-red-600",children:"✗ Passwords do not match"})}),s.jsx("button",{type:"submit",disabled:i||e.isPending||!r||r!==t,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i||e.isPending?"Resetting...":"Reset Password"}),e.error&&s.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-200 p-4",children:s.jsx("div",{className:"text-sm text-red-700 dark:text-red-900",children:e.error.message})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx(m,{to:"/login",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Back to Login"})})]})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:s.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10 text-center",children:[s.jsx(j,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Invalid Reset Link"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"This password reset link is invalid or has expired. Please request a new one."}),s.jsx(m,{to:"/forgot-password",className:"inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Request New Link"})]})})})}export{S as default};
